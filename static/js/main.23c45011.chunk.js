(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{206:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(70),s=n.n(c),i=n(3),o=n.n(i),u=n(2),l=n(6),d=n(14),p=n(0),j=function(){return Object(p.jsx)("header",{children:Object(p.jsx)("h1",{children:"Add a city for getting the weather forecast"})})},m=function(t){var e=t.addCity,n=Object(r.useState)(""),a=Object(d.a)(n,2),c=a[0],s=a[1];return Object(p.jsx)("form",{onSubmit:function(t){t.preventDefault(),c&&e(c),s("")},children:Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsxs)("div",{className:"input-group mb-3",children:[Object(p.jsx)("label",{className:"form-label",children:Object(p.jsx)("input",{type:"text",name:"city",value:c,onChange:function(t){s(t.target.value)},className:"form-control",placeholder:"City name"})}),Object(p.jsx)("div",{className:"input-group-append",children:Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add"})})]})})})},b=(n(80),function(t){var e=t.id,n=t.handleDelete,r=t.name;return Object(p.jsxs)("li",{className:"list-group-item",children:[r,Object(p.jsx)("button",{className:"btn btn-danger btn-sm",id:e,onClick:function(t){t.preventDefault(),n(t.currentTarget.id)},children:"Delete"})]})}),f=function(t){var e=t.cities,n=t.handleDelete;return Object(p.jsx)("div",{className:"input-group mb-3",children:Object(p.jsx)("ul",{className:"list-group list-group-flush",children:e.map((function(t){return Object(p.jsx)(b,{id:t.id,handleDelete:n,name:t.name},t.key)}))})})},h=(n(81),function(t){var e=t.city;if(e.forecast.weather){var n="http://openweathermap.org/img/wn/"+e.forecast.weather[0].icon+"@2x.png";return Object(p.jsx)("img",{className:"card-img-top",src:n,alt:"current weather icon"})}}),x=function(t){var e=t.city,n=Math.round(e.forecast.main.temp);return Object(p.jsxs)("div",{className:"city-info",children:[Object(p.jsx)("h2",{className:"card-title",children:e.name}),Object(p.jsxs)("p",{className:"card-text",children:["current temp: ",n," \xb0C"]})]})},O=n(73),v=function(t){var e=t.city.longTermForecast.data.list;e.splice(8,8);var n={labels:[],datasets:[{label:"Long term forecast",data:[],backgroundColor:[],borderWidth:1}]},r=function(t,e,n){return t>=e&&t<=n};e.map((function(t){var e=function(t){var e=new Date(Date.parse(t)),n=e.getDate(),r=e.getMonth()+1,a=e.getHours(),c=e.getMinutes();return"".concat(n,".").concat(r," at ").concat(a,":").concat(c)}(t.dt_txt),a=Math.round(t.main.temp),c=function(t){return r(t,25,100)?"rgba(255, 99, 132, 0.2)":r(t,10,24)?"rgba(255, 206, 86, 0.2)":r(t,-5,9)?"rgba(57,226,226,0.2)":r(t,-100,-4)?"rgba(27,113,239,0.2)":"rgba(255, 159, 64, 0.2)"}(a);n.labels.push(e),n.datasets[0].data.push(a),n.datasets[0].backgroundColor.push(c)}));return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(O.a,{data:n,width:100,height:50,options:{maintainAspectRatio:!1}})})},g=function(t){var e=t.city,n=Math.round(e.forecast.main.feels_like),r=Math.round(e.forecast.main.temp_max),a=Math.round(e.forecast.main.temp_min);return Object(p.jsxs)("div",{className:"additional-info",children:[Object(p.jsxs)("p",{className:"card-text",children:["feels like: ",n," \xb0C"]}),Object(p.jsxs)("p",{className:"card-text",children:["humidity: ",e.forecast.main.humidity," %"]}),Object(p.jsxs)("p",{className:"card-text",children:["pressure: ",e.forecast.main.pressure," hPa"]}),Object(p.jsxs)("p",{className:"card-text",children:["temp max: ",r," \xb0C"]}),Object(p.jsxs)("p",{className:"card-text",children:["temp min: ",a," \xb0C"]}),Object(p.jsx)("div",{style:{height:200,marginBottom:20},children:"longTermForecast"in e&&Object(p.jsx)(v,{city:e})})]})},y=function(t){var e=t.city,n=t.setForecast;return Object(p.jsx)("button",{className:"btn btn-primary",onClick:function(t){!function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation()}(t),n(e.name)},children:"Update Weather"})},w=function(t){var e=t.cities,n=t.setForecast,r=t.setLongTermForecast;return e.map((function(t){return Object(p.jsx)("div",{className:"col-sm-6",children:Object(p.jsxs)("div",{className:"card text-center",onClick:function(e){e.currentTarget.classList.toggle("active"),r(t.name)},children:[Object(p.jsx)(h,{city:t}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)(x,{city:t}),Object(p.jsx)(g,{city:t})]}),Object(p.jsx)(y,{city:t,setForecast:n})]})},t.key)}))},N=function(t){var e=t.cities,n=t.setForecast,r=t.setLongTermForecast;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Cities"}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)(w,{cities:e,setForecast:n,setLongTermForecast:r})})]})},k=n(26),F=n.n(k),C=function(){var t=Object(l.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.get("https://cors-anywhere.herokuapp.com/https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&units=metric&APPID=b0e3cfcac6b3bb698bc3351ad3e21975"));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(){var t=Object(l.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.get("https://cors-anywhere.herokuapp.com/http://api.openweathermap.org/data/2.5/forecast?q=".concat(e,"&cnt=16&units=metric&appid=b0e3cfcac6b3bb698bc3351ad3e21975"));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=function(t){var e=Object(r.useState)(JSON.parse(localStorage.getItem(t))||[]),n=Object(d.a)(e,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){localStorage.setItem(t,JSON.stringify(a))}),[a]),[a,c]}("cities"),e=Object(d.a)(t,2),n=e[0],a=e[1],c=function(){var t=Object(l.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a,t.t1=[],t.t2=Object(u.a)(n),t.t3=Date.now(),t.t4=Date.now(),t.t5=e,t.next=8,i(e);case 8:return t.t6=t.sent,t.next=11,D(e);case 11:t.t7=t.sent,t.t8={key:t.t3,id:t.t4,name:t.t5,forecast:t.t6,longTermForecast:t.t7},t.t9=[t.t8],t.t10=t.t1.concat.call(t.t1,t.t2,t.t9),(0,t.t0)(t.t10);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(l.a)(o.a.mark((function t(e){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e);case 2:r=t.sent,c=n.filter((function(t){return t.name==e?t.forecast=r:n})),a(c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(l.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(l.a)(o.a.mark((function t(e){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:r=t.sent,c=n.filter((function(t){return t.name==e?t.longTermForecast=r:n})),a(c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(l.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"app container",children:Object(p.jsxs)("div",{className:"citiesListMain",children:[Object(p.jsx)(j,{}),Object(p.jsx)(m,{addCity:c}),Object(p.jsx)(f,{cities:n,handleDelete:function(t){var e=n.filter((function(e){return e.id!=t}));a(e)}}),Object(p.jsx)(N,{cities:n,setForecast:s,setLongTermForecast:b})]})})},M=document.querySelector("#root");s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(T,{})}),M)},80:function(t,e,n){},81:function(t,e,n){}},[[206,1,2]]]);
//# sourceMappingURL=main.23c45011.chunk.js.map
